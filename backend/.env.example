# ==============================================================================
# BACKEND ENVIRONMENT CONFIGURATION
# ==============================================================================
#
# Copy this file to `.env` and fill in your values.
# Never commit `.env` to version control (it's in .gitignore).
#
# ==============================================================================

# ------------------------------------------------------------------------------
# SERVER CONFIGURATION
# ------------------------------------------------------------------------------

# Host IP to bind the server to
# Default: 127.0.0.1 (localhost only)
# Use 0.0.0.0 to accept connections from any IP (required for Docker/production)
BACKEND_HOST=127.0.0.1

# Port to run the server on
# Default: 8000
BACKEND_PORT=8000

# ------------------------------------------------------------------------------
# DATABASE CONFIGURATION
# ------------------------------------------------------------------------------

# PostgreSQL connection string
# Format: postgres://username:password@host:port/database
# Leave empty/unset for no database (health check will show "database: disabled")
DATABASE_URL=postgres://postgres:password@localhost:5432/myapp

# Whether the database is required for the app to start
# If true and DATABASE_URL is missing/invalid, the server will fail to start
# If false and DATABASE_URL is missing, server starts without DB (health shows "disabled")
# Default: true if DATABASE_URL is set, false otherwise
DATABASE_REQUIRED=true

# ------------------------------------------------------------------------------
# LOGGING
# ------------------------------------------------------------------------------

# Log level for the application
# Options: error, warn, info, debug, trace
# Default: info
RUST_LOG=info

# ------------------------------------------------------------------------------
# SECURITY CONFIGURATION (REQUIRED FOR PRODUCTION)
# ------------------------------------------------------------------------------

# Environment mode (development or production)
# Controls Secure flag on cookies
ENVIRONMENT=development

# JWT secret for token signing (REQUIRED)
# Generate with: openssl rand -base64 32
# NEVER commit this to version control!
JWT_SECRET=change-this-to-a-random-32-byte-secret

# CORS allowed origins (comma-separated)
# Development default includes Expo dev servers
ALLOWED_ORIGINS=http://localhost:8081,http://localhost:19006,http://127.0.0.1:8081,http://10.0.2.2:8081

# ------------------------------------------------------------------------------
# DATABASE CONNECTION POOL (OPTIONAL TUNING)
# ------------------------------------------------------------------------------

# Maximum number of connections in the pool
# Default: 20
DB_POOL_MAX_SIZE=20

# Minimum number of idle connections
# Default: 5
DB_POOL_MIN_IDLE=5

# Connection timeout in seconds
# Default: 30
DB_POOL_CONNECTION_TIMEOUT=30

# ------------------------------------------------------------------------------
# PRODUCTION NOTES
# ------------------------------------------------------------------------------
#
# Before deploying to production:
#
# 1. Set ENVIRONMENT=production
# 2. Generate a secure JWT_SECRET (32+ bytes)
# 3. Update ALLOWED_ORIGINS with your production domain(s)
# 4. Use DATABASE_URL with SSL enabled
# 5. Run migrations: diesel migration run
# 6. Consider using a reverse proxy (nginx, Caddy) for TLS
#
# ==============================================================================
